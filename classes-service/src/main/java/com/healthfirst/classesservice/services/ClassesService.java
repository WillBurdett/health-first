package com.healthfirst.classesservice.services;import com.healthfirst.classesservice.enums.ClassType;import com.healthfirst.classesservice.exceptions.ClassInfoNotFoundException;import com.healthfirst.classesservice.models.ClassInfo;import com.healthfirst.classesservice.repositories.ClassesRepo;import java.time.LocalDateTime;import java.util.ArrayList;import java.util.List;import java.util.Optional;import java.util.stream.Collectors;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;@Servicepublic class ClassesService {  private final ClassesRepo classesRepo;  @Autowired  public ClassesService(ClassesRepo classesRepo) {    this.classesRepo = classesRepo;  }  public List<ClassInfo> getAllClasses(){    return classesRepo.findAll();  }  public ClassInfo getClassById(Long id) throws ClassInfoNotFoundException {    Optional<ClassInfo> ClassInfo=  classesRepo.findAll().stream()        .filter(m -> m.getId() == id)        .findFirst();    if(ClassInfo.isPresent()){      return ClassInfo.get();    }    throw new ClassInfoNotFoundException("ClassInfo not found with id " + id);  }  public ClassInfo addClass(ClassInfo ClassInfo) {    ClassInfo savedClassInfo = classesRepo.save(ClassInfo);    return savedClassInfo;  }  public void deleteClass(Long id) {    classesRepo.deleteById(id);  }  public ClassInfo updateClass(Long id, ClassInfo ClassInfo) {    Optional<ClassInfo> curr = classesRepo.findAll().stream().filter(m -> m.getId() == id).findFirst();    if (curr.isPresent()){      curr.get().setClassName(ClassInfo.getClassName());      curr.get().setInstructor(ClassInfo.getInstructor());      curr.get().setClassType(ClassInfo.getClassType());      curr.get().setClassTime(ClassInfo.getClassTime());      classesRepo.save(curr.get());      return curr.get();    }    throw new ClassInfoNotFoundException("ClassInfo not found with id " + id);  }  public List<ClassInfo> getRelevantClasses(List<ClassType> allInterests) {    List<ClassInfo> relevantClasses = new ArrayList<>();    List<ClassInfo> allClasses = classesRepo.findAll();    for (ClassType a:    allInterests) {      for (ClassInfo c:      allClasses) {        if (a.equals(c.getClassType())){          relevantClasses.add(c);        }      }    }    return relevantClasses;  }  public void hydrate() {    List <ClassInfo> hydrationClasses = List.of(        new ClassInfo(            "Beginners Swimming",            "David Schwimmer",            ClassType.SWIMMING,            LocalDateTime.of(2024, 2, 2, 2,2))        ,        new ClassInfo(            "7-a-side",            "Lionel Messi",            ClassType.TEAMSPORTS,            LocalDateTime.of(2024, 2, 2, 2,2))        ,        new ClassInfo(            "10km group run",            "Paula Radcliffe",            ClassType.ATHLETICS,            LocalDateTime.of(2024, 2, 2, 2,2))    );    for (ClassInfo c : hydrationClasses){      addClass(c);    }  }}